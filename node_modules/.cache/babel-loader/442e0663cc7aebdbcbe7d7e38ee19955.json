{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\manis\\\\academics\\\\sem3\\\\web\\\\mini-project\\\\twilight-updated-light\\\\src\\\\Components\\\\Upload\\\\index.js\";\nimport React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport Header from '../Header';\nimport \"./Upload.css\";\n\nclass Upload extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      files: [],\n      redirect: false,\n      postcaption: \"\"\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    console.log(\"Entered Handlesubmit\");\n    const data = new FormData();\n    data.append('postmedia', this.state.files[0]);\n    data.append('postcaption', this.state.postcaption);\n    data.append('media_type', this.state.files[0].type);\n    data.append('username', this.props.location.state.username);\n    data.append('useravatar', this.props.location.state.useravatar);\n    data.append('date', Date(Date.now()).toString());\n    fetch('/posts/upload', {\n      method: 'POST',\n      body: data\n    }).then(console.log(\"Success\")).catch(error => {\n      console.error('Error:', error);\n    });\n    this.setState({\n      redirect: true\n    });\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        push: true,\n        to: {\n          pathname: \"/Home\",\n          state: {\n            username: this.props.location.state.username,\n            useravatar: this.props.location.state.useravatar\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 12\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        username: this.props.location.state.username,\n        useravatar: this.props.location.state.useravatar\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Post Something\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 27\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Put a caption!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 4\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 26\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"postcaption\",\n          onChange: e => {\n            this.setState({\n              postcaption: e.target.value\n            });\n          },\n          value: this.state.postcaption\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Add a photo or video : \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 4\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 35\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          name: \"postmedia\",\n          onChange: e => {\n            this.setState({\n              files: e.target.files\n            });\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.handleSubmit,\n          children: \"Post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 4\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 2\n    }, this);\n  }\n\n}\n\nexport default Upload;","map":{"version":3,"sources":["C:/Users/manis/academics/sem3/web/mini-project/twilight-updated-light/src/Components/Upload/index.js"],"names":["React","Redirect","Header","Upload","Component","constructor","props","state","files","redirect","postcaption","handleSubmit","bind","e","preventDefault","console","log","data","FormData","append","type","location","username","useravatar","Date","now","toString","fetch","method","body","then","catch","error","setState","render","pathname","target","value"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {Redirect} from 'react-router-dom';\nimport Header from '../Header';\n\nimport \"./Upload.css\";\n\nclass Upload extends React.Component{\n\nconstructor(props){\nsuper(props);\n\nthis.state = {\n\tfiles:[],\n\tredirect:false,\n\tpostcaption:\"\",\n};\n\nthis.handleSubmit = this.handleSubmit.bind(this);\n\n}\n\nhandleSubmit(e){\ne.preventDefault();\nconsole.log(\"Entered Handlesubmit\");\n const data = new FormData();\n   data.append('postmedia', this.state.files[0]);\n   data.append('postcaption',this.state.postcaption);\n   data.append('media_type',this.state.files[0].type);\n   data.append('username',this.props.location.state.username);\n   data.append('useravatar',this.props.location.state.useravatar);\n   data.append('date',Date(Date.now()).toString());\n  fetch('/posts/upload', {\n    method: 'POST',\n    body: data,\n  })\n.then(console.log(\"Success\"))\n.catch((error) => {\n  console.error('Error:', error);\n  })\n\nthis.setState({redirect:true});\n}\n\n\n\nrender(){\n  if (this.state.redirect) {\n    return <Redirect push to={{\n            pathname: \"/Home\",\n            state: {\n\t\tusername:this.props.location.state.username,\n\t\tuseravatar:this.props.location.state.useravatar\n\t}\n          }} />;\n  }\n\nreturn(\n <div>\n    <Header username={this.props.location.state.username} useravatar={this.props.location.state.useravatar}/>\n   <form > \n   <h1>Post Something</h1><br/>\n   <p>Put a caption!</p> <br/>\n   <input type = \"text\" name = \"postcaption\" onChange = {(e)=>{this.setState({postcaption:e.target.value})}} value = {this.state.postcaption}/>\n   <p>Add a photo or video : </p> <br/>\n   <input type=\"file\" name=\"postmedia\" onChange = {(e)=>{this.setState({files: e.target.files})}}/>\n   <button onClick = {this.handleSubmit}>Post</button>\n   </form>\n</div>\n);\n\n}\n}\n\nexport default Upload;\n"]},"metadata":{},"sourceType":"module"}