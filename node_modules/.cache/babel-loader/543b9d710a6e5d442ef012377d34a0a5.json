{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\manis\\\\academics\\\\sem3\\\\web\\\\mini-project\\\\Twilight\\\\src\\\\Components\\\\Upload\\\\index.js\";\nimport React from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport Header from \"../Header\";\nimport \"./Upload.css\";\n\nclass Upload extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      files: [],\n      redirect: false,\n      postcaption: \"\"\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    console.log(\"Entered Handlesubmit\");\n    const data = new FormData();\n    data.append(\"postmedia\", this.state.files[0]);\n    data.append(\"postcaption\", this.state.postcaption);\n    data.append(\"media_type\", this.state.files[0].type);\n    data.append(\"username\", this.props.location.state.username);\n    data.append(\"useravatar\", this.props.location.state.useravatar);\n    data.append(\"date\", Date(Date.now()).toString());\n    fetch(\"/posts/upload\", {\n      method: \"POST\",\n      body: data\n    }).then(console.log(\"Success\")).catch(error => {\n      console.error(\"Error:\", error);\n    });\n    this.setState({\n      redirect: true\n    });\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        push: true,\n        to: {\n          pathname: \"/Home\",\n          state: {\n            username: this.props.location.state.username,\n            useravatar: this.props.location.state.useravatar\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        username: this.props.location.state.username,\n        useravatar: this.props.location.state.useravatar\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Post Something\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Put a caption!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 40\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"postcaption\",\n          onChange: e => {\n            this.setState({\n              postcaption: e.target.value\n            });\n          },\n          value: this.state.postcaption\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Add a photo or video :\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 48\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          name: \"postmedia\",\n          onChange: e => {\n            this.setState({\n              files: e.target.files\n            });\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          class: \"btn btn-primary\",\n          onClick: this.handleSubmit,\n          children: \"Post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Upload;","map":{"version":3,"sources":["C:/Users/manis/academics/sem3/web/mini-project/Twilight/src/Components/Upload/index.js"],"names":["React","Redirect","Header","Upload","Component","constructor","props","state","files","redirect","postcaption","handleSubmit","bind","e","preventDefault","console","log","data","FormData","append","type","location","username","useravatar","Date","now","toString","fetch","method","body","then","catch","error","setState","render","pathname","target","value"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport Header from \"../Header\";\n\nimport \"./Upload.css\";\n\nclass Upload extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      files: [],\n      redirect: false,\n      postcaption: \"\",\n    };\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    console.log(\"Entered Handlesubmit\");\n    const data = new FormData();\n    data.append(\"postmedia\", this.state.files[0]);\n    data.append(\"postcaption\", this.state.postcaption);\n    data.append(\"media_type\", this.state.files[0].type);\n    data.append(\"username\", this.props.location.state.username);\n    data.append(\"useravatar\", this.props.location.state.useravatar);\n    data.append(\"date\", Date(Date.now()).toString());\n    fetch(\"/posts/upload\", {\n      method: \"POST\",\n      body: data,\n    })\n      .then(console.log(\"Success\"))\n      .catch((error) => {\n        console.error(\"Error:\", error);\n      });\n\n    this.setState({ redirect: true });\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return (\n        <Redirect\n          push\n          to={{\n            pathname: \"/Home\",\n            state: {\n              username: this.props.location.state.username,\n              useravatar: this.props.location.state.useravatar,\n            },\n          }}\n        />\n      );\n    }\n\n    return (\n      <div>\n        <Header\n          username={this.props.location.state.username}\n          useravatar={this.props.location.state.useravatar}\n        />\n        <hr/>\n        <form>\n\n          <h4>Post Something</h4>\n          <br />\n          <p><b>Put a caption!</b></p> <br />\n          <input\n            type=\"text\"\n            name=\"postcaption\"\n            onChange={(e) => {\n              this.setState({ postcaption: e.target.value });\n            }}\n            value={this.state.postcaption}\n          />\n          <p><b>Add a photo or video :</b></p> <br />\n          <input\n            type=\"file\"\n            name=\"postmedia\"\n            onChange={(e) => {\n              this.setState({ files: e.target.files });\n            }}\n          />\n          <button class=\"btn btn-primary\" onClick={this.handleSubmit}>Post</button>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default Upload;\n"]},"metadata":{},"sourceType":"module"}